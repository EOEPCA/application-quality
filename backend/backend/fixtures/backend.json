[{"model": "backend.pipeline", "pk": "python", "fields": {"description": "python pipeline", "template": "#!/usr/bin/env cwltool\r\n\r\n$graph:\r\n- class: Workflow\r\n\r\n  requirements:\r\n    SubworkflowFeatureRequirement: {}\r\n\r\n  inputs:\r\n    pipeline_id:\r\n      type: string\r\n    repo_url:\r\n      type: string\r\n    run_id:\r\n      type: string\r\n    server_url:\r\n      type: string\r\n\r\n  outputs: []\r\n\r\n  steps:\r\n    clone_step:\r\n      in:\r\n        repo_url: repo_url\r\n      run: '#clone-tool.cwl'\r\n      out:\r\n      - repo_directory\r\n    {% for tool in tools %}{{ tool.workflow_step | indent(4) }}\r\n    {% endfor %}\r\n  id: '#main'\r\n\r\n- class: CommandLineTool\r\n\r\n  requirements:\r\n    DockerRequirement:\r\n      dockerPull: alpine/git\r\n    InlineJavascriptRequirement: {}\r\n\r\n  inputs:\r\n    repo_url:\r\n      type: string\r\n      inputBinding:\r\n        position: 1\r\n\r\n  outputs:\r\n    repo_directory:\r\n      type: Directory\r\n      outputBinding:\r\n        glob: $(inputs.repo_url.split('/').pop().replace('.git',''))\r\n\r\n  baseCommand: git\r\n  arguments:\r\n  - clone\r\n  id: '#clone-tool.cwl'\r\n{% for tool in tools %}\r\n{{ tool.definition }}\r\n{% endfor %}\r\ncwlVersion: v1.0", "version": "0.1", "tools": ["flake8_workflow", "pylint_workflow"]}}, {"model": "backend.pipelinerun", "pk": 1, "fields": {"pipeline": "python", "usage_report": "", "start_time": "2024-11-06T10:38:26.928Z", "completion_time": null, "status": "Starting", "user": null, "output": ""}}, {"model": "backend.pipelinerun", "pk": 2, "fields": {"pipeline": "python", "usage_report": {"children": [{"cpus": 1.0, "name": "clone_step", "cpu_hours": 0.0002777777777777778, "exit_code": 0, "start_time": "2024-11-06T10:43:12+00:00", "finish_time": "2024-11-06T10:43:13+00:00", "elapsed_hours": 0.0002777777777777778, "ram_megabytes": 268.435456, "disk_megabytes": 0.0, "elapsed_seconds": 1.0, "ram_megabyte_hours": 0.07456540444444444}, {"cpus": 1.0, "name": "flake8_step", "cpu_hours": null, "exit_code": 0, "start_time": "2024-11-06T10:43:14+00:00", "finish_time": "2024-11-06T10:43:14+00:00", "elapsed_hours": null, "ram_megabytes": 268.435456, "disk_megabytes": 0.000464, "elapsed_seconds": 0.0, "ram_megabyte_hours": null}, {"cpus": 1.0, "name": "pylint_step", "cpu_hours": 0.0011111111111111111, "exit_code": 0, "start_time": "2024-11-06T10:43:15+00:00", "finish_time": "2024-11-06T10:43:19+00:00", "elapsed_hours": 0.0011111111111111111, "ram_megabytes": 268.435456, "disk_megabytes": 0.00172, "elapsed_seconds": 4.0, "ram_megabyte_hours": 0.29826161777777777}, {"cpus": 1.0, "name": "save_pylint_step", "cpu_hours": null, "exit_code": 0, "start_time": "2024-11-06T10:43:23+00:00", "finish_time": "2024-11-06T10:43:23+00:00", "elapsed_hours": null, "ram_megabytes": 268.435456, "disk_megabytes": 0.0, "elapsed_seconds": 0.0, "ram_megabyte_hours": null}, {"cpus": 1.0, "name": "save_flake8_step", "cpu_hours": null, "exit_code": 0, "start_time": "2024-11-06T10:43:23+00:00", "finish_time": "2024-11-06T10:43:23+00:00", "elapsed_hours": null, "ram_megabytes": 268.435456, "disk_megabytes": 0.0, "elapsed_seconds": 0.0, "ram_megabyte_hours": null}], "start_time": "2024-11-06T10:43:12+00:00", "finish_time": "2024-11-06T10:43:23+00:00", "total_tasks": 5, "cores_allowed": 2.0, "elapsed_hours": 0.0030555555555555557, "ram_mb_allowed": 2147.483648, "elapsed_seconds": 11.0, "total_cpu_hours": 0.001388888888888889, "max_parallel_cpus": 1.0, "max_parallel_tasks": 1, "total_disk_megabytes": 0.002184, "total_ram_megabyte_hours": 0.3728270222222222, "max_parallel_ram_megabytes": 268.435456}, "start_time": "2024-11-06T10:42:23.615Z", "completion_time": "2024-11-06T10:43:27Z", "status": "succeeded", "user": null, "output": {}}}, {"model": "backend.tag", "pk": 1, "fields": {"name": "python"}}, {"model": "backend.tool", "pk": "flake8_workflow", "fields": {"name": "flake8_workflow", "description": "flake8 workflow", "workflow_step": "flake8_workflow:\r\n  in:\r\n    pipeline_id: pipeline_id\r\n    repo_path: clone_step/repo_directory\r\n    run_id: run_id\r\n    server_url: server_url\r\n  run: '#flake8-workflow.cwl'\r\n  out:\r\n  - flake8_report", "definition": "- class: Workflow\r\n\r\n  inputs:\r\n    flake8_step_id:\r\n      type: string\r\n      default: 2-flake8\r\n    pipeline_id:\r\n      type: string\r\n    repo_path:\r\n      type: Directory\r\n    run_id:\r\n      type: string\r\n    server_url:\r\n      type: string\r\n\r\n  outputs:\r\n    flake8_report:\r\n      type: File\r\n      outputSource: flake8_step/flake8_report\r\n\r\n  steps:\r\n    flake8_step:\r\n      in:\r\n        source_directory: repo_path\r\n      run: '#flake8-tool.cwl'\r\n      out:\r\n      - flake8_report\r\n    save_flake8_step:\r\n      in:\r\n        pipeline_id: pipeline_id\r\n        report: flake8_step/flake8_report\r\n        run_id: run_id\r\n        server_url: server_url\r\n        step_id: flake8_step_id\r\n      run: '#save-flake8-tool.cwl'\r\n      out: []\r\n  id: '#flake8-workflow.cwl'\r\n- class: CommandLineTool\r\n\r\n  requirements:\r\n    DockerRequirement:\r\n      dockerPull: eoepca/appquality-flake8-json:v0.1.0\r\n\r\n  inputs:\r\n    source_directory:\r\n      type: Directory\r\n      inputBinding:\r\n        position: 1\r\n\r\n  outputs:\r\n    flake8_report:\r\n      type: File\r\n      outputBinding:\r\n        glob: flake8_report.json\r\n  stdout: flake8_report.json\r\n\r\n  baseCommand: flake8\r\n  arguments:\r\n  - --format=json\r\n  id: '#flake8-tool.cwl'\r\n- class: CommandLineTool\r\n\r\n  requirements:\r\n    DockerRequirement:\r\n      dockerPull: curlimages/curl\r\n    InlineJavascriptRequirement: {}\r\n\r\n  inputs:\r\n    pipeline_id:\r\n      type: string\r\n    report:\r\n      type: File\r\n    run_id:\r\n      type: string\r\n    server_url:\r\n      type: string\r\n    step_id:\r\n      type: string\r\n\r\n  outputs: []\r\n\r\n  baseCommand: curl\r\n  arguments:\r\n  - prefix: -X\r\n    valueFrom: POST\r\n  - prefix: -L\r\n    valueFrom: |-\r\n      $('http://' + inputs.server_url + '/save/' + inputs.pipeline_id + '-' + inputs.run_id + '/' + inputs.step_id + '_report.json')\r\n  - prefix: -H\r\n    valueFrom: Content-Type:application/json\r\n  - prefix: -d\r\n    valueFrom: $('@' + inputs.report.path)\r\n  id: '#save-flake8-tool.cwl'", "is_cwl": true, "version": "0.1", "tags": [1], "tools": []}}, {"model": "backend.tool", "pk": "pylint_workflow", "fields": {"name": "pylint_workflow", "description": "pylint workflow", "workflow_step": "pylint_workflow:\r\n  in:\r\n    pipeline_id: pipeline_id\r\n    repo_path: clone_step/repo_directory\r\n    run_id: run_id\r\n    server_url: server_url\r\n  run: '#pylint-workflow.cwl'\r\n  out:\r\n  - pylint_report", "definition": "- class: Workflow\r\n\r\n  inputs:\r\n    pylint_step_id:\r\n      type: string\r\n      default: 2-pylint\r\n    pipeline_id:\r\n      type: string\r\n    repo_path:\r\n      type: Directory\r\n    run_id:\r\n      type: string\r\n    server_url:\r\n      type: string\r\n\r\n  outputs:\r\n    pylint_report:\r\n      type: File\r\n      outputSource: pylint_step/pylint_report\r\n\r\n  steps:\r\n    pylint_step:\r\n      in:\r\n        source_directory: repo_path\r\n      run: '#pylint-tool.cwl'\r\n      out:\r\n      - pylint_report\r\n    save_pylint_step:\r\n      in:\r\n        pipeline_id: pipeline_id\r\n        report: pylint_step/pylint_report\r\n        run_id: run_id\r\n        server_url: server_url\r\n        step_id: pylint_step_id\r\n      run: '#save-pylint-tool.cwl'\r\n      out: []\r\n  id: '#pylint-workflow.cwl'\r\n- class: CommandLineTool\r\n\r\n  requirements:\r\n    DockerRequirement:\r\n      dockerPull: cytopia/pylint\r\n    InlineJavascriptRequirement: {}\r\n\r\n  inputs:\r\n    source_directory:\r\n      type: Directory\r\n      inputBinding:\r\n        position: 1\r\n        valueFrom: $(inputs.source_directory.path + \"/**/*.py\")\r\n\r\n  outputs:\r\n    pylint_report:\r\n      type: File\r\n      outputBinding:\r\n        glob: pylint_report.json\r\n\r\n  baseCommand: pylint\r\n  arguments:\r\n  - --output-format=json\r\n  - --output=pylint_report.json\r\n  - --exit-zero\r\n  id: '#pylint-tool.cwl'\r\n- class: CommandLineTool\r\n\r\n  requirements:\r\n    DockerRequirement:\r\n      dockerPull: curlimages/curl\r\n    InlineJavascriptRequirement: {}\r\n\r\n  inputs:\r\n    pipeline_id:\r\n      type: string\r\n    report:\r\n      type: File\r\n    run_id:\r\n      type: string\r\n    server_url:\r\n      type: string\r\n    step_id:\r\n      type: string\r\n\r\n  outputs: []\r\n\r\n  baseCommand: curl\r\n  arguments:\r\n  - prefix: -X\r\n    valueFrom: POST\r\n  - prefix: -L\r\n    valueFrom: |-\r\n      $('http://' + inputs.server_url + '/save/' + inputs.pipeline_id + '-' + inputs.run_id + '/' + inputs.step_id + '_report.json')\r\n  - prefix: -H\r\n    valueFrom: Content-Type:application/json\r\n  - prefix: -d\r\n    valueFrom: $('@' + inputs.report.path)\r\n  id: '#save-pylint-tool.cwl'", "is_cwl": true, "version": "0.1", "tags": [1], "tools": []}}]